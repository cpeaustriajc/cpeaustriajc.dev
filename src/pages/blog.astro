---
import Head from '@/components/Head.astro';
import Post from '@/components/Post.astro';
import DefaultLayout from '@/layouts/DefaultLayout.astro';
import type { Frontmatter } from '@/types/frontmatter';

const posts = await Astro.glob<Frontmatter>('../pages/posts/*.md');
const nonDraftPosts = posts.filter((post) => !post.frontmatter.draft);
---

<DefaultLayout>
	<Head slot="head">
		<title>Blog | John Carlo Austria</title>
		<meta
			name="description"
			content="John Carlo Austria's Personal Portfolio, A frontend developer based in the Philippines; Blog section"
		/>
	</Head>

	<main slot="content">
		<article>
			<h1>Blog Posts</h1>
			<h2>Topics</h2>
			<ul>
				{nonDraftPosts.map((post) => <Post post={post} />)}
			</ul>
		</article>
	</main>
</DefaultLayout>

<style>
	article {
		margin: unset 2rem;
	}

	h1 {
		font-size: 3rem;
		line-height: 1;
		font-weight: bold;
		margin: 2rem unset;
	}

	h2 {
		font-size: 2.25rem;
		font-weight: bold;
		line-height: 2.5rem;
		margin: 1rem unset;
	}

	ul {
		display: grid;
		grid-template-columns: repeat(2, minmax(0, 1fr));
		gap: 2rem;
	}

	@media (min-width: 768px) {
		ul {
			grid-template-columns: repeat(2, minmax(0, 1fr));
		}
	}

	@media (min-width: 1024px) {
		article {
			width: 75%;
			margin: unset auto;
		}

		ul {
			grid-template-columns: repeat(4, minmax(0, 1fr));
		}
	}
</style>
